!function(t){"use strict";function e(){var e=t("#rtwpvs_attribute_tooltip").val();"text"===e?(t(".rtwpvs_attribute_tooltip_text").show(),t(".rtwpvs_attribute_tooltip_image").hide()):"image"===e?(t(".rtwpvs_attribute_tooltip_text").hide(),t(".rtwpvs_attribute_tooltip_image").show()):(t(".rtwpvs_attribute_tooltip_image").hide(),t(".rtwpvs_attribute_tooltip_text").hide())}t.fn.wpColorPicker&&t("input.rtwpvs-color-picker").wpColorPicker(),jQuery(document).ajaxComplete(function(e,r,i){if(r&&4===r.readyState&&200===r.status&&i.data&&0<=i.data.indexOf("action=add-tag")){var s=wpAjax.parseAjaxResponse(r.responseXML,"ajax-response");if(!s||s.errors)return;return t.fn.wpColorPicker&&t("input.rtwpvs-color-picker").wpColorPicker(),void t("button.rtwpvs-remove-image").trigger("click")}}),t(document).on("click","button.rtwpvs-upload-image",function(e){var r;e.stopPropagation();var i=t(this);if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(r)return void r.open();(r=wp.media.frames.select_image=wp.media({title:rtwpvs_admin.media_title,button:{text:rtwpvs_admin.button_title},multiple:!1})).on("select",function(){var e=r.state().get("selection").first().toJSON();if(""!==t.trim(e.id)){var s=void 0===e.sizes.thumbnail?e.sizes.full.url:e.sizes.thumbnail.url;i.prev().val(e.id),i.closest(".rtwpvs-image-wrapper").find("img").attr("src",s),i.next().show()}}),r.on("open",function(){var t=r.state().get("selection"),e=i.prev().val(),s=wp.media.attachment(e);s.fetch(),t.add(s?[s]:[])}),r.open()}}),t(document).on("click","button.rtwpvs-remove-image",function(e){e.preventDefault(),e.stopPropagation();var r=t(this),i=r.closest(".rtwpvs-image-wrapper").find("img").data("placeholder");return r.closest(".rtwpvs-image-wrapper").find("img").attr("src",i),r.prev().prev().val(""),r.hide(),!1}),t("#rtwpvs-settings-wrapper").on("click",".nav-tab",function(e){e.preventDefault();var r=t(this).data("target");if(t(this).addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t("#"+r).show().siblings().hide(),t("#_last_active_tab").val(r),history.pushState){var i=function(t,e){var r=window.location.href,i=location.hash;if((r=r.replace(i,"")).indexOf("?")>=0){var s=r.substring(r.indexOf("?")+1).split("&"),n=!1;s.forEach(function(r,i){var a=r.split("=");a[0]==t&&(s[i]=t+"="+e,n=!0)}),n||s.push(t+"="+e),r=r.substring(0,r.indexOf("?")+1)+s.join("&")}else r+="?"+t+"="+e;return r+i}("section",r);window.history.pushState({path:i},"",i)}}),t(".rtwpvs-metaboxes-wrapper").on("click",".rtwpvs-metabox > h3",function(){t(this).parent(".rtwpvs-metabox").toggleClass("closed").toggleClass("open")}).on("click",".rtwpvs-metabox h3",function(e){t(e.target).filter(":input, option, .sort").length||t(this).next(".rtwpvs-metabox-content").stop().slideToggle()}),t(".rtwpvs-metabox.closed").each(function(){t(this).find(".rtwpvs-metabox-content").hide()}),t(document.body).on("click",".rtwpvs-save-attributes",function(){t.ajax({type:"POST",url:rtwpvs_admin.ajaxurl,data:{post_id:rtwpvs_admin.post_id,nonce:rtwpvs_admin.nonce,action:"rtwpvs_save_product_attributes",data:t(".rtwpvs-tab-options").find("input, select, textarea").serialize()},beforeSend:function(){t("#rtwpvs_tab_options").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(e){t("#rtwpvs_tab_options").unblock()},error:function(e,r){t("#rtwpvs_tab_options").unblock(),console.error("Uncaught Error:"+e.responseText)}})}),t(document.body).on("click",".rtwpvs-reset-attributes",function(){if(confirm(rtwpvs_admin.reset_notice)){t("#rtwpvs_tab_options").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e={post_id:rtwpvs_admin.post_id,nonce:rtwpvs_admin.nonce,action:"rtwpvs_reset_product_attributes"};t.ajax({type:"POST",url:rtwpvs_admin.ajaxurl,data:e,beforeSend:function(){t("#rtwpvs_tab_options").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(e){t("#woocommerce-product-data").trigger("woocommerce_variations_loaded"),t("#rtwpvs_tab_options").unblock()},error:function(e,r){t("#rtwpvs_tab_options").unblock(),console.error("Uncaught Error:"+e.responseText)}})}}),t(".rtwpvs-setting-tab #license_key-wrapper").on("click",".rt-licensing-btn",function(e){e.preventDefault(),console.log("clicked");var r=t(this),i=r.hasClass("license_activate")?"license_activate":"license_deactivate";t.ajax({type:"POST",url:rtwpvs_admin.ajaxurl,data:{action:"rtwpvs_manage_licensing",type:i},beforeSend:function(){r.addClass("loading"),r.parents(".description").find(".rt-licence-msg").remove(),t('<span class="rt-icon-spinner animate-spin"></span>').insertAfter(r)},success:function(e){r.next(".rt-icon-spinner").remove(),r.removeClass("loading"),e.error||(r.text(e.value),r.removeClass(i),r.addClass(e.type),"license_deactivate"==e.type?(r.removeClass("button-primary"),r.addClass("danger")):"license_activate"==e.type&&(r.removeClass("danger"),r.addClass("button-primary"))),e.msg&&t("<span class='rt-licence-msg'>"+e.msg+"</span>").insertAfter(r),r.blur()},error:function(t,e){r.removeClass("loading"),r.next(".rt-icon-spinner").remove()}})}),t.fn.rtWpVsProductAttributeTermTooltipType=function(){return this.each(function(){var e=this,r=t(this).closest(".rtwpvs-metabox-content-wrap");t(this).on("change.attribute",function(i){var s,n,a;s=t(e).val(),n="rtwpvs_visible_if_tooltip_"+s,a=["text","image"].map(function(t){return"rtwpvs_visible_if_tooltip_"+t}).join(" "),r.removeClass(a).addClass(n)})})},t.fn.rtWpVsProductAttributeType=function(){return this.each(function(){var e=this,r=t(this).closest(".rtwpvs-attribute-box-wrapper"),i=function(){var i=t(e).val(),s="rtwpvs_visible_if_"+i,n=Object.keys(rtwpvs_admin.attribute_types).map(function(t){return"rtwpvs_visible_if_"+t}).join(" ");return r.removeClass(n).addClass(s),i};t(this).on("change",function(t){var e=i();r.find(".rtwpvs-attribute-term-type").val(e).trigger("change.term")}),t(this).on("change.attribute",function(t){i()})})},t.fn.rtWpVsProductAttributeTermType=function(){return this.each(function(){var e=this,r=t(this).closest(".rtwpvs-attribute-term-box-wrapper"),i=t(this).closest(".rtwpvs-attribute-box-wrapper"),s=function(){var i=t(e).val(),s="rtwpvs_visible_if_term_"+i,n=Object.keys(rtwpvs_admin.attribute_types).map(function(t){return"rtwpvs_visible_if_term_"+t}).join(" ");return n+=" rtwpvs_visible_if_custom",r.removeClass(n).addClass(s),i};t(this).on("change",function(e){s();var r=[];i.find(".rtwpvs-attribute-term-type").each(function(){r.push(t(this).val())});var n=_.uniq(r);1===n.length?i.find(".rtwpvs-attribute-type").val(n.toString()).trigger("change.attribute"):i.find(".rtwpvs-attribute-type").val("custom").trigger("change.attribute")}),t(this).on("change.term",function(t){s()})})},t.fn.rtWpVsProductAttributeTermDualColor=function(e){return this.each(function(){var e=t(this).closest(".rtwpvs-metabox-content-wrap");t(this).on("change",function(r){var i=t(this).is(":checked"),s=e.find(".rtwpvs-attribute-term-secondary-color");i?s.addClass("rtwpvs_visible_if_dual_color_yes"):s.removeClass("rtwpvs_visible_if_dual_color_yes")}),t(this).trigger("change")})},t(".rtwpvs-attribute-type").rtWpVsProductAttributeType(),t(".rtwpvs-attribute-term-type").rtWpVsProductAttributeTermType(),t(".rtwpvs-attribute-term-tooltip select").rtWpVsProductAttributeTermTooltipType(),t(".rtwpvs-attribute-term-is-dual-color input").rtWpVsProductAttributeTermDualColor(),e(),t("#rtwpvs_attribute_tooltip").on("change",function(){e()}),t.fn.RtDependency&&t("[data-rt-depends]").RtDependency()}(jQuery);
